# PiDriveSmartOS OBD Service Configuration
#
# Settings for the OBD-II service daemon

[CAN]
# CAN interface name
interface = can0

# CAN bus bitrate (bps)
bitrate = 500000

# CAN bus type
bustype = socketcan

# Receive timeout (seconds)
receive_timeout = 0.5

[OBD]
# OBD-II protocol
# Options: auto, SAE J1979, ISO 15765-4, ISO 9141-2, ISO 14230-4
protocol = auto

# Request timeout (seconds)
request_timeout = 5

# Number of retries for failed requests
max_retries = 3

# Query interval (milliseconds)
query_interval = 500

# PIDs to query (comma-separated hex values)
# Standard PIDs:
#   0x0C - Engine RPM
#   0x0D - Vehicle Speed
#   0x2F - Fuel Level
#   0x05 - Engine Coolant Temperature
#   0x42 - Control Module Voltage
#   0x11 - Throttle Position
#   0x10 - MAF Air Flow Rate
query_pids = 0x0C,0x0D,0x2F,0x05,0x42

# Extended PIDs (manufacturer-specific)
extended_pids = 

[DBus]
# DBus service configuration
service_name = org.pidrive.obd
object_path = /org/pidrive/obd
interface_name = org.pidrive.obd.VehicleData

# Use system bus (true) or session bus (false)
system_bus = true

[DTC]
# Diagnostic Trouble Code settings

# Auto-query DTCs on startup
query_on_startup = true

# Query interval (seconds, 0=never)
query_interval = 3600  # Every hour

# Clear DTCs require confirmation
clear_requires_confirmation = true

[Logging]
# Log file location
log_file = /var/log/pidrive/obd.log

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
log_level = INFO

# Max log file size (MB)
max_log_size = 50

# Log backup count
backup_count = 5

# Log to console
log_to_console = false

[Security]
# Read-only mode (no writing to CAN bus)
read_only = true

# Allowed CAN IDs (whitelist, comma-separated)
# 0x7DF - OBD functional address
# 0x7E0-0x7E7 - OBD physical addresses
# 0x7E8-0x7EF - OBD response addresses
allowed_can_ids = 0x7DF,0x7E0,0x7E1,0x7E2,0x7E3,0x7E4,0x7E5,0x7E6,0x7E7

# CAN message rate limit (messages per second)
rate_limit = 100

# Enable intrusion detection
ids_enabled = true

[Vehicle]
# Vehicle-specific settings

# VIN (Vehicle Identification Number)
vin = 

# Engine displacement (liters)
engine_displacement = 2.0

# Fuel type (gasoline, diesel, electric, hybrid)
fuel_type = gasoline

# Odometer offset (km)
odometer_offset = 0

[Performance]
# Performance tuning

# Use asynchronous I/O
async_io = true

# Buffer size for CAN messages
buffer_size = 100

# Thread pool size
thread_pool_size = 2

# Enable caching of responses
cache_enabled = true
cache_ttl = 5  # seconds

